<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokémon RPG - Scheda Personaggio</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&family=Press+Start+2P&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="character-sheet">
        <header class="sheet-header">
            <h1>Pokémon RPG</h1>
            <div class="type-badges" id="typeBadges">
                <!-- Filled by JavaScript -->
            </div>
        </header>

        <div class="pokemon-info-section">
           
                <div class="info-group">
                    <label for="pokemonName">Nome Allenatore</label>
                    <input type="text" id="nomea" class="input-field" placeholder="">
                    <label for="pokemonName">Nome Pokémon</label>
                    <input type="text" id="nomep" class="input-field" placeholder="">
                </div>

                <div class="info-row">
                    <div class="info-group">
                        <label for="pokemonTypes">Tipi</label>
                        <select id="tipo1">
                            <option value="Normale">Normale</option>
                                <option value="Fuoco">Fuoco</option>
                                <option value="Acqua">Acqua</option>
                                <option value="Erba">Erba</option>
                                <option value="Elettro">Elettro</option>
                                <option value="Ghiaccio">Ghiaccio</option>
                                <option value="Lotta">Lotta</option>
                                <option value="Veleno">Veleno</option>
                                <option value="Terra">Terra</option>
                                <option value="Volante">Volante</option>
                                <option value="Psico">Psico</option>
                                <option value="Coleottero">Coleottero</option>
                                <option value="Roccia">Roccia</option>
                                <option value="Spettro">Spettro</option>
                                <option value="Drago">Drago</option>
                                <option value="Buio">Buio</option>
                                <option value="Acciaio">Acciaio</option>
                                <option value="Folletto">Folletto</option>
                        </select>
                        <select id="tipo2">
                                <option selected value="">Monotipo</option>
                                <option value="Normale">Normale</option>
                                <option value="Fuoco">Fuoco</option>
                                <option value="Acqua">Acqua</option>
                                <option value="Erba">Erba</option>
                                <option value="Elettro">Elettro</option>
                                <option value="Ghiaccio">Ghiaccio</option>
                                <option value="Lotta">Lotta</option>
                                <option value="Veleno">Veleno</option>
                                <option value="Terra">Terra</option>
                                <option value="Volante">Volante</option>
                                <option value="Psico">Psico</option>
                                <option value="Coleottero">Coleottero</option>
                                <option value="Roccia">Roccia</option>
                                <option value="Spettro">Spettro</option>
                                <option value="Drago">Drago</option>
                                <option value="Buio">Buio</option>
                                <option value="Acciaio">Acciaio</option>
                                <option value="Folletto">Folletto</option>
                        </select>
                    </div>
                    <div class="info-group">
                        <label for="level">Livello</label>
                        <input type="text" id="level" class="input-field small" value="5" min="1" max="100">
                    </div>

                    <div class="info-group">
                        <label for="experience">ESP</label>
                        <input type="text" id="esperienza" class="input-field small" value="0" min="0">
                    </div>
                </div>

                <div class="info-row">
                    <div class="info-group">
                        <label for="gender">Sesso</label>
                        <input type="text" id="sesso">
                    </div>

                    <div class="info-group">
                        <label for="nature">Natura</label>
                        <input type="text" id="natura">
                    </div>
                </div>

                <div class="info-group">
                    <label for="ability">Abilità</label>
                    <input type="text" id="abilita">
                </div>
                                <div class="info-group">
                    <label for="ability">INFO Abilità</label>
                    <input type="text" id="infoabilita">
                </div>
            </div>

            <div class="pokemon-image">
                <div class="image-placeholder">
                    <span>Carica immagine</span>
                    <input type="text" id="pokemonImage"><button id="caricaimmagine">Carica immagine</button>
                </div>
            </div>
        </div>

        <div class="stats-section">
            <h2>Statistiche di Combattimento</h2>

            <div class="hp-container">
                <div class="hp-separator">/</div>
                <div class="info-group">
                    <label for="maxHP">HP Massimi</label>
                    <input type="text" id="maxHP" class="input-field" value="20" readonly>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-item">
                    <label for="hp">HP</label>
                    <input type="text" id="hp" class="stat-input" value="20">
                </div>
                <div class="stat-item">
                    <label for="atk">ATK</label>
                    <input type="text" id="attacco" class="stat-input" value="10">
                </div>
                <div class="stat-item">
                    <label for="def">DEF</label>
                    <input type="text" id="difesa" class="stat-input" value="10">
                </div>
                <div class="stat-item">
                    <label for="spatk">SP.ATK</label>
                    <input type="text" id="attas" class="stat-input" value="10">
                </div>
                <div class="stat-item">
                    <label for="spdef">SP.DEF</label>
                    <input type="text" id="difes" class="stat-input" value="10">
                </div>
                <div class="stat-item">
                    <label for="speed">VELOCITÀ</label>
                    <input type="text" id="vel" class="stat-input" value="10">
                </div>
                <div class="stat-item">
                    <label for="physEvade">FIS. EVADE</label>
                    <input type="text" id="physEvade" class="stat-input" value="1">
                </div>
                <div class="stat-item">
                    <label for="specEvade">SPEC. EVADE</label>
                    <input type="text" id="specEvade" class="stat-input" value="1">
                </div>
                <div class="stat-item">
                    <label for="speedEvade">VEL. EVADE</label>
                    <input type="text" id="speedEvade" class="stat-input" value="1">
                </div>
            </div>


    <script src="index.js"></script>
        <div class="sheet-footer">
            <button class="save-btn" onclick="addpokemon()">Salva Scheda</button>
            <button class="reset-btn">Resetta</button>
        </div>
    </div>

    <script src="index.js"></script>


      <script>
    const form = document.getElementById('caricaimmagine');
    const input = document.getElementById('nomep');
    const result = document.getElementById('pokemonImage');

    const API_BASE = 'https://pokeapi.co/api/v2/pokemon/';

    form.addEventListener('click', async (e) => {
      e.preventDefault();
          result.value='';
      const name = input.value.trim();
      if (!name) return;
      result.innerHTML = '<div class="loader" aria-hidden="true"></div> <div class="meta">Caricamento...</div>';

      try {
        const query = encodeURIComponent(name.toLowerCase());
        const res = await fetch(API_BASE + query);
        if (!res.ok) {
          if (res.status === 404) throw new Error('Pokémon non trovato. Controlla il nome.');
          throw new Error('Errore nella richiesta: ' + res.status);
        }
        const data = await res.json();

        const artwork = data.sprites && data.sprites.other && data.sprites.other['official-artwork'] && data.sprites.other['official-artwork'].front_default;

        if (!artwork) {
          result.innerHTML = `<div class="error">Artwork ufficiale non disponibile per ${escapeHtml(data.name)}</div>`;
          return;
        }

        result.value = `${escapeHtml(artwork)}
        `;

      } catch (err) {
        result.innerHTML = `<div class="error">${escapeHtml(err.message)}</div>`;
      }
    });

    function escapeHtml(s){
      return String(s)
        .replace(/&/g,'&amp;')
        .replace(/</g,'&lt;')
        .replace(/>/g,'&gt;')
        .replace(/"/g,'&quot;')
        .replace(/'/g,'&#39;');
    }

    function capitalize(s){
      if (!s) return s; return s.charAt(0).toUpperCase() + s.slice(1);
    }

    input.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        input.value = '';
        result.value = '';
      }
    });
  </script>
</body>

</html>